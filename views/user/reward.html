<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ของรางวัล </title>

    <!-- TailwindCSS -->
    <link href="/stylesheets/output.css" rel="stylesheet" />

</head>
<body class="bg-background">
<!-- TW Elements JavaScript -->
<script src="/tw-elements/dist/js/tw-elements.umd.min.js" type="text/javascript"></script>

<!-- Navbar-->
<nav class="bg-transparent max-w-screen">
    <div class="max-w-full max-w-screen fixed flex m-5 top-0 items-center justify-between p-4 gap-2 drop-shadow-lg">
        <a id="rewardPage" class="flex items-center space-x-3 rtl:space-x-reverse">
            <img src="images/LOGO_KasetFairVerse.png" class="h-12" />
            <span class="self-center font-semibold text-blue whitespace-nowrap dark:text-white"> KASETFAIR VERSE </span>
        </a>
    </div>
</nav>


<!-- content -->
<div class="flex flex-col mx-auto pt-24 lg:px-16 container">

    <div class="flex flex-col items-center justify-center w-full pb-0 my-0">
        <h1 class="text-4xl lg:text-6xl text-blue font-bold text-center">
            ร่วมสนุกกับกิจกรรม
        </h1>
        <h2 class="text-2xl lg:text-4xl text-blue font-bold pt-2">
            แลกรับของรางวัล
        </h2>

    </div>

    <div class="flex flex-row items-center justify-center w-full pb-0 my-0 pt-6">
        <% if (logged_in) { %>
        <div class="flex flex-col lg:flex-row justify-start justify-start w-full pb-0 my-0">
        <h2 class="text-xl lg:text-2xl text-blue font-bold">
            สวัสดีผู้ใช้: <%= username %>
        </h2>
        </div>

        <% } %>
        <div class="flex flex-col lg:flex-row items-end justify-end gap-2 w-full my-0 py-0  lg:text-xl">
            <div class="flex flex-col">
                <a id="myCouponButtonNav">
                    <button class="text-md bg-primary hover:bg-secondary hover:text-gray-900 text-white font-semibold py-1 px-2 border border-gray-400 rounded-xl shadow">
                        ดูคูปองของฉัน
                    </button>
                </a>
            </div>

            <% if (!logged_in) { %>
            <div class="flex flex-col">
                <a id="loginButton" href="/login">
                    <button class="flex justify-center items-center gap-2 text-md bg-primary hover:bg-secondary hover:text-gray-900 text-white font-semibold py-1 px-2 border border-gray-400 rounded-xl shadow">
                        <svg width="20px" height="20px" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M8 6C8 3.79086 9.79086 2 12 2H17.5C19.9853 2 22 4.01472 22 6.5V17.5C22 19.9853 19.9853 22 17.5 22H12C9.79086 22 8 20.2091 8 18V17C8 16.4477 8.44772 16 9 16C9.55228 16 10 16.4477 10 17V18C10 19.1046 10.8954 20 12 20H17.5C18.8807 20 20 18.8807 20 17.5V6.5C20 5.11929 18.8807 4 17.5 4H12C10.8954 4 10 4.89543 10 6V7C10 7.55228 9.55228 8 9 8C8.44772 8 8 7.55228 8 7V6ZM12.2929 8.29289C12.6834 7.90237 13.3166 7.90237 13.7071 8.29289L16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L13.7071 15.7071C13.3166 16.0976 12.6834 16.0976 12.2929 15.7071C11.9024 15.3166 11.9024 14.6834 12.2929 14.2929L13.5858 13L5 13C4.44772 13 4 12.5523 4 12C4 11.4477 4.44772 11 5 11L13.5858 11L12.2929 9.70711C11.9024 9.31658 11.9024 8.68342 12.2929 8.29289Z" fill="#ffffff"></path> </g></svg>
                        เข้าสู่ระบบ
                    </button>
                </a>
            </div>
            <% } else {%>
            <div class="flex flex-col" >
                <a id="logoutButton" href="/reward">
                    <button class="flex justify-center items-center gap-2 text-md bg-orange-400 hover:bg-red text-white font-semibold py-1 px-2 border border-gray-400 rounded-xl shadow">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M14.9453 1.25C13.5778 1.24998 12.4754 1.24996 11.6085 1.36652C10.7084 1.48754 9.95048 1.74643 9.34857 2.34835C8.82363 2.87328 8.55839 3.51836 8.41916 4.27635C8.28387 5.01291 8.25799 5.9143 8.25196 6.99583C8.24966 7.41003 8.58357 7.74768 8.99778 7.74999C9.41199 7.7523 9.74964 7.41838 9.75194 7.00418C9.75803 5.91068 9.78643 5.1356 9.89448 4.54735C9.99859 3.98054 10.1658 3.65246 10.4092 3.40901C10.686 3.13225 11.0746 2.9518 11.8083 2.85315C12.5637 2.75159 13.5648 2.75 15.0002 2.75H16.0002C17.4356 2.75 18.4367 2.75159 19.1921 2.85315C19.9259 2.9518 20.3144 3.13225 20.5912 3.40901C20.868 3.68577 21.0484 4.07435 21.1471 4.80812C21.2486 5.56347 21.2502 6.56459 21.2502 8V16C21.2502 17.4354 21.2486 18.4365 21.1471 19.1919C21.0484 19.9257 20.868 20.3142 20.5912 20.591C20.3144 20.8678 19.9259 21.0482 19.1921 21.1469C18.4367 21.2484 17.4356 21.25 16.0002 21.25H15.0002C13.5648 21.25 12.5637 21.2484 11.8083 21.1469C11.0746 21.0482 10.686 20.8678 10.4092 20.591C10.1658 20.3475 9.99859 20.0195 9.89448 19.4527C9.78643 18.8644 9.75803 18.0893 9.75194 16.9958C9.74964 16.5816 9.41199 16.2477 8.99778 16.25C8.58357 16.2523 8.24966 16.59 8.25196 17.0042C8.25799 18.0857 8.28387 18.9871 8.41916 19.7236C8.55839 20.4816 8.82363 21.1267 9.34857 21.6517C9.95048 22.2536 10.7084 22.5125 11.6085 22.6335C12.4754 22.75 13.5778 22.75 14.9453 22.75H16.0551C17.4227 22.75 18.525 22.75 19.392 22.6335C20.2921 22.5125 21.0499 22.2536 21.6519 21.6517C22.2538 21.0497 22.5127 20.2919 22.6337 19.3918C22.7503 18.5248 22.7502 17.4225 22.7502 16.0549V7.94513C22.7502 6.57754 22.7503 5.47522 22.6337 4.60825C22.5127 3.70814 22.2538 2.95027 21.6519 2.34835C21.0499 1.74643 20.2921 1.48754 19.392 1.36652C18.525 1.24996 17.4227 1.24998 16.0551 1.25H14.9453Z" fill="#ffffff"></path> <path d="M15 11.25C15.4142 11.25 15.75 11.5858 15.75 12C15.75 12.4142 15.4142 12.75 15 12.75H4.02744L5.98809 14.4306C6.30259 14.7001 6.33901 15.1736 6.06944 15.4881C5.79988 15.8026 5.3264 15.839 5.01191 15.5694L1.51191 12.5694C1.34567 12.427 1.25 12.2189 1.25 12C1.25 11.7811 1.34567 11.573 1.51191 11.4306L5.01191 8.43056C5.3264 8.16099 5.79988 8.19741 6.06944 8.51191C6.33901 8.8264 6.30259 9.29988 5.98809 9.56944L4.02744 11.25H15Z" fill="#ffffff"></path> </g></svg>
                        ออกจากระบบ
                    </button>
                </a>
            </div>
            <% }%>
    </div>
    </div>

    <section class="bg-white lg:p-16 lg:py-16 p-6 border rounded-md  mb-4 mt-1 flex flex-col lg:flex-col items-center flex-wrap">

        <!-- info -->
        <div>
            <section>
                <h4 class="text-center text-xl font-bold text-blue">
                    ยินดีต้อนรับสู่หน้าแลกคูปอง
                </h4>
                <p class="text-center text-lg font-semibold text-blue">
                    คุณสามารถนำดาวจากการเล่นเกมต่าง ๆ ในซุ้มมาแลกเป็นคูปอง เพื่อแลกรับของรางวัลภายในงานเกษตรแฟร์
                </p>
            </section>

            <section>
                <p class="text-center text-lg font-semibold text-red pt-5 ">
                    หากคุณเก็บครบ 7 ดาว รับไปเลย ฟรี ! ตั๋วหนังเมเจอร์ 2 ใบ (โดยไม่ต้องแลก)
                    <br>และผู้เล่นที่แชร์ลงโซเชียลมีเดีย ว่าเข้าร่วมกิจกรรมของเรา
                    <br>รับฟรี ! ของรางวัลพิเศษจาก THE PREMIUM @KU
                    <br>(แสดงหลักฐานการแชร์ให้ staff ดูที่ซุ้มแลกของรางวัล)
                </p>
            </section>

        </div>

        <!-- รายการของรางวัล -->
        <div>
            <h2 class="text-2xl underline py-10 text-blue font-semibold">
                รายการของรางวัล
            </h2>
        </div>
        <div class="grid grid-cols-2 gap-6 sm:gap-x-10 sm:grid-cols-3 lg:grid-cols-5 lg:gap-12 lg:grid-cols-5 shadow-sm p-2">
            <% for (let i = 0; i < reward_div_list.length; i++) { %>
            <div class="flex flex-col flex-wrap items-center justify-center w-full shadow-lg p-2">

                <div class="bg-white rounded-lg flex flex-col lg:flex-col items-center h-24">
                    <img src="<%= reward_div_list[i].image %>" width="75" >
                </div>

                <div>
                <h3 class=" text-[14px] lg:text-[18px] text-blue">
                    <%= reward_div_list[i].reward[0] %>
                </h3>
                </div>

                <h4 class="text-xs lg:text-[12px] text-blue">
                    <%= reward_div_list[i].reward[1] %>
                </h4>

                <h4 class="text-xs md:text-xs lg:text-[14px] text-orange-600 pt-2">
                    <%= reward_div_list[i].stars_use %>
                </h4>
            </div>
            <% } %>
        </div>

        <div class="flex items-center justify-center p-4 text-orange-600 font-semibold">
            <p class="text-center">
                *จำนวนดาวที่ใช้ หมายถึงใช้ดาวที่ต่างชนิดกัน เช่น ใช้ดาว 6 ดวง หมายถึงใช้ดาว 6 ดวงต่างชนิดกัน
            </p>
        </div>

        <div class="flex items-center justify-center px-4 pb-4 text-red font-semibold">
            <p class="text-center">
                คุณสามารถถือดาวได้ไม่เกิน 10 ดวง ต่อชนิด หากคุณมีดาวครบ 10 ดวงแล้ว จะไม่สามารถได้รับดาวเพิ่มเติมได้อีก จนกว่าคุณจะใช้ดาวที่ถืออยู่
            </p>
        </div>

        <div class="flex flex-col pt-5 ">
            <a id="tradeCouponButton">
            <button class="text-xl bg-primary hover:bg-secondary hover:text-gray-900  text-white font-semibold py-2 px-4 border border-gray-400 rounded-3xl shadow">
                แลกของรางวัล
            </button>
            </a>
        </div>


        <div class="flex flex-col pt-3 ">
            <a id="myCouponButton">
            <button class="text-xl bg-primary hover:bg-secondary hover:text-gray-900  text-white font-semibold py-2 px-4 border border-gray-400 rounded-3xl shadow">
                ดูคูปองของฉัน
            </button>
            </a>
        </div>

    </section>

    <!-- เมนูเกม -->
    <section class="bg-white lg:p-16 lg:py-14 p-6 border rounded-md  mb-4 mt-1 flex flex-col lg:flex-col items-center flex-wrap">
        <div>
            <h2 class="text-2xl underline pb-10 pt-4 text-blue font-semibold">
                เข้าเล่นเกมต่าง ๆ
            </h2>
        </div>
        <!-- Card -->
        <button>
        <div class="grid grid-cols-2 gap-6 sm:gap-x-10 sm:grid-cols-3 lg:grid-cols-4 lg:gap-12 lg:grid-cols-4 shadow-sm p-2">
            <% for (let i = 0; i < game_div_list.length; i++) { %>
            <a id="<%= game_div_list[i].name %>" href="<%= game_div_list[i].url %>" class="hover:shadow-secondary hover:shadow-xl transition-all duration-300">
                <div class="flex flex-col flex-wrap items-center justify-center w-full shadow-inner p-2 ">

                    <div class="bg-white flex flex-col lg:flex-col items-center h-24">
                        <img src="<%= game_div_list[i].icon %>" class="drop-shadow-lg" width="75" >
                    </div>

                    <div>
                        <h3 class=" text-[14px] lg:text-[18px] text-blue hover:text-red transition-all duration-500">
                            <%= game_div_list[i].name %>
                        </h3>
                    </div>

                    <p class="text-xs lg:text-[12px] text-blue text-center">
                        <%= game_div_list[i].description %>
                    </p>
                </div>
            </a>
            <% } %>
        </div>
        </button>

    </section>

<!--    Leaderboard -->
    <section class="bg-white p-6 border rounded-md my-4 flex flex-col lg:flex-col items-center mb-10">
        <div class="flex flex-row gap-2 text-2xl underline pt-10 text-blue font-semibold">
            ตารางอันดับ
        </div>

        <p class="text-center text-md font-semibold text-red py-4 ">
            ผู้เล่นที่ขยันเก็บสะสมดาว จะมีของรางวัลพิเศษ(ของรางวัลมูลค่าสูง)ให้!!
        </p>

        <div class="flex flex-col lg:flex-row lg:space-x-10 lg:space-y-0 space-x-1 space-y-8 pt-2 pb-16">
            <div class="bg-background rounded-lg drop-shadow-xl p-6 flex flex-col items-center justify-center">
                <svg id="Icons" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" xml:space="preserve" width="80px" height="80px" fill="#30845C" stroke="#30845C" transform="matrix(1, 0, 0, 1, 0, 0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css"> .st0{fill:none;stroke:#ccf5ff;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;} </style> <path d="M17,10c-6.1,0-11,4.9-11,11s4.9,11,11,11s11-4.9,11-11S23.1,10,17,10z M19,26h-4c-0.6,0-1-0.4-1-1s0.4-1,1-1h1v-4h-1 c-0.6,0-1-0.4-1-1s0.4-1,1-1h1v-1c0-0.6,0.4-1,1-1s1,0.4,1,1v7h1c0.6,0,1,0.4,1,1S19.6,26,19,26z"></path> <path d="M13.4,8.5L13,0H8C7.7,0,7.4,0.1,7.2,0.4S7,0.9,7,1.2l1.8,9.7C10.2,9.8,11.7,9,13.4,8.5z"></path> <path d="M17,8c0.6,0,1.1,0,1.7,0.1L19,0H15l0.3,8.1C15.9,8,16.4,8,17,8z"></path> <path d="M25.2,10.9L27,1.2c0.1-0.3,0-0.6-0.2-0.8S26.3,0,26,0h-5l-0.3,8.5C22.3,9,23.8,9.8,25.2,10.9z"></path> </g></svg>

                <div class="text-center text-lg font-semibold text-primary pt-4">
                    ผู้เล่นที่มีดาวมากที่สุด
                </div>

                <div class="text-center text-2xl font-semibold text-blue pt-2">
                        Khaokrapow
                </div>

                <div>
                    <h3 class="text-center text-lg font-semibold text-blue">
                        150 ดาว
                    </h3>
                </div>

            </div>

            <table class="table-fixed text-blue text-lg overflow-auto">
                <thead class="text-sm bg-gray-50">
                <tr>
                    <th class="px-4 py-2">อันดับ</th>
                    <th class="px-4 py-2">ชื่อผู้เล่น</th>
                    <th class="px-4 py-2">ดาวที่มี</th>
                </tr>
                </thead>
                <tbody>

                <tr class="bg-white border-b">
                    <td class="border px-4 py-2">2</td>
                    <td class="border px-4 py-2">Mick</td>
                    <td class="border px-4 py-2">135</td>
                </tr>

                <tr>
                    <td class="border px-4 py-2">3</td>
                    <td class="border px-4 py-2">Khaokrapow</td>
                    <td class="border px-4 py-2">134</td>
                </tr>

                <tr>
                    <td class="border px-4 py-2">4</td>
                    <td class="border px-4 py-2">Mick</td>
                    <td class="border px-4 py-2">133</td>
                </tr>

                <tr>
                    <td class="border px-4 py-2">5</td>
                    <td class="border px-4 py-2">Khaokrapow</td>
                    <td class="border px-4 py-2">132</td>
                </tr>

                <tr>
                    <td class="border px-4 py-2">6</td>
                    <td class="border px-4 py-2">Mick</td>
                    <td class="border px-4 py-2">131</td>
                </tr>

                <tr>
                    <td class="border px-4 py-2">7</td>
                    <td class="border px-4 py-2">Khaokrapow</td>
                    <td class="border px-4 py-2">130</td>
                </tr>

                <tr>
                    <td class="border px-4 py-2">8</td>
                    <td class="border px-4 py-2">Mick</td>
                    <td class="border px-4 py-2">129</td>
                </tr>

                <tr>
                    <td class="border px-4 py-2">9</td>
                    <td class="border px-4 py-2">Khaokrapow</td>
                    <td class="border px-4 py-2">128</td>
                </tr>

                <tr>
                    <td class="border px-4 py-2">10</td>
                    <td class="border px-4 py-2">Mick</td>
                    <td class="border px-4 py-2">127</td>
                </tr>

                </tbody>
            </table>
        </div>

    </section>

    <!-- สปอน -->
    <section class="bg-white p-6 border rounded-md my-4 flex flex-col lg:flex-col items-center mb-10">
        <div>
            <h2 class="text-2xl underline py-10 text-blue font-semibold">
                ผู้สนับสนุนของรางวัล
            </h2>
        </div>

        <div class="grid grid-cols-2  gap-6 sm:gap-x-10 sm:grid-cols-4 lg:grid-cols-5 lg:gap-12 lg:grid-cols-5 p-2">
            <% for (let i = 0; i < sponsor_div_list.length; i++) { %>
            <div class="flex flex-col flex-wrap items-center justify-center w-full ">
                <div class="bg-white flex flex-col lg:flex-col items-center h-24 ">
                    <div class="bg-white flex flex-col lg:flex-col items-center h-24">
                        <img src="<%= sponsor_div_list[i].image %>" width="75" >
                    </div>
                </div>
            </div>
            <% } %>

        </div>
    </section>

</div>


<section>
    <div class="bg-primary p-4 md:py-4 flex flex-col lg:flex-col items-center">
        <img src="images/footer_logo.png" width="200" class="block justify-center items-center">
    </div>
</section>

<script nonce="<%= nonce %>">

    // Get the current URL
    const currentUrl = window.location.href;

    // Create a URL object from the current URL
    const url = new URL(currentUrl);

    // Get the search part of the URL, including the '?'
    const searchParams = url.search;

    // Create a URLSearchParams object from the search part
    const urlSearchParams = new URLSearchParams(searchParams);

    // Get the value of the 'access_token' parameter
    const accessToken = urlSearchParams.get('access_token');

    // Now you can use the 'accessToken' variable wherever you need it
    console.log(currentUrl, accessToken);

    rewardPage.href = "/reward?access_token=" + accessToken;
    myCouponButton.href = "/my_coupon?access_token=" + accessToken;
    myCouponButtonNav.href = "/my_coupon?access_token=" + accessToken;
    tradeCouponButton.href = "/trade_coupon?access_token=" + accessToken;

    const gameButtonList = [<%= game_button_list %>]
    for (let i = 1; i < gameButtonList.length; i++) {
        // gameButtonList[i].href = "/game_middleware?access_token=" + accessToken + "?game_id=" + gameButtonList[i].id;
        gameButtonList[i].href += "?access_token=" + accessToken;
    }

</script>

<!-- TW Elements JavaScript -->
<script src="/tw-elements/dist/js/tw-elements.umd.min.js" type="text/javascript"></script>
</body>
</html>