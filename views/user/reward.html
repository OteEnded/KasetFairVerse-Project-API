<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ของรางวัล </title>

    <!-- TailwindCSS -->
    <link href="/stylesheets/output.css" rel="stylesheet" />

</head>
<body class="bg-background">
<!-- TW Elements JavaScript -->
<script src="/tw-elements/dist/js/tw-elements.umd.min.js" type="text/javascript"></script>

<!-- Navbar-->
<nav class="bg-transparent max-w-screen">
    <div class="max-w-full max-w-screen fixed flex m-5 top-0 items-center justify-between p-4 gap-2 drop-shadow-lg">
        <a id="rewardPage" class="flex items-center space-x-3 rtl:space-x-reverse">
            <img src="images/LOGO_KasetFairVerse.png" class="h-12" />
            <span class="self-center font-semibold text-blue whitespace-nowrap dark:text-white">KASETFAIR VERSE </span>
        </a>
    </div>
</nav>


<!-- content -->
<div class="flex flex-col mx-auto pt-24 lg:px-16 container">

    <div class="flex flex-col items-center justify-center w-full pb-0 my-0">
        <h1 class="text-4xl lg:text-6xl text-blue font-bold text-center">
            ร่วมสนุกกับกิจกรรม
        </h1>
        <h2 class="text-2xl lg:text-4xl text-blue font-bold pt-2">
            แลกรับของรางวัล
        </h2>

    </div>

    <div class="flex flex-col lg:flex-row items-center justify-center w-full pb-0 my-0">
        <% if (logged_in) { %>
        <div class="flex flex-col lg:flex-row justify-start justify-start w-full pb-0 my-0">
        <h2 class="text-xl lg:text-2xl text-blue font-bold">
            สวัสดีผู้ใช้: <%= username %>
        </h2>
        </div>
        <% } %>
    <div class="flex flex-col lg:flex-row items-end justify-end gap-2 w-full my-0 py-0">

        <% if (!logged_in) { %>
        <div class="flex flex-col">
            <a id="loginButton" href="/login">
                <button class="text-xl bg-primary hover:bg-secondary hover:text-gray-900 text-white font-semibold py-1 px-2 border border-gray-400 rounded-xl shadow">
                    เข้าสู่ระบบ
                </button>
            </a>
        </div>
        <% } else {%>
        <div class="flex flex-col" >
            <a id="logoutButton" href="/reward">
                <button class="text-xl bg-orange-400 hover:bg-red text-white font-semibold py-1 px-2 border border-gray-400 rounded-xl shadow">
                    ออกจากระบบ
                </button>
            </a>
        </div>
        <% }%>

        <div class="flex flex-col">
            <a id="myCouponButtonNav">
                <button class="text-xl bg-primary hover:bg-secondary hover:text-gray-900 text-white font-semibold py-1 px-2 border border-gray-400 rounded-xl shadow">
                    ดูคูปองของฉัน
                </button>
            </a>
        </div>
    </div>
    </div>

    <section class="bg-white lg:p-16 lg:py-16 p-6 border rounded-md  mb-4 mt-1 flex flex-col lg:flex-col items-center flex-wrap">

        <!-- info -->
        <div>
            <section>
                <h4 class="text-center text-[20px] font-semibold text-blue">
                    ยินดีต้อนรับสู่หน้าแลกคูปอง
                </h4>
                <p class="text-center text-[16px] font-semibold text-blue">
                    คุณสามารถนำดาวจากการเล่นเกมต่าง ๆ ในซุ้มมาแลกเป็นคูปอง เพื่อแลกรับของรางวัลภายในงานเกษตรแฟร์
                </p>
            </section>

            <section>
                <p class="text-center text-[16px] font-semibold text-red pt-5 ">
                    หากคุณเก็บครบ 7 ดาว รับไปเลย ฟรี ! ตั๋วหนังเมเจอร์ 2 ใบ (โดยไม่ต้องแลก)
                    <br>และผู้เล่นที่เข้ามาแลกของรางวัล 100 ท่านแรกที่หน้างาน
                    <br> รับฟรี ! ของรางวัลพิเศษจาก THE PREMIUM @KU
                </p>
            </section>

        </div>

        <!-- รายการของรางวัล -->
        <div>
            <h2 class="text-2xl underline py-10 text-blue font-semibold">
                รายการของรางวัล
            </h2>
        </div>
        <div class="grid grid-cols-2 gap-6 sm:gap-x-10 sm:grid-cols-3 lg:grid-cols-5 lg:gap-12 lg:grid-cols-5 shadow-sm p-2">
            <% for (let i = 0; i < reward_div_list.length; i++) { %>
            <div class="flex flex-col flex-wrap items-center justify-center w-full shadow-lg p-2">

                <div class="bg-white flex flex-col lg:flex-col items-center h-24">
                    <img src="<%= reward_div_list[i].image %>" width="75" >
                </div>

                <div>
                <h3 class=" text-[14px] lg:text-[18px] text-blue">
                    <%= reward_div_list[i].reward[0] %>
                </h3>
                </div>

                <h4 class="text-xs lg:text-[12px] text-blue">
                    <%= reward_div_list[i].reward[1] %>
                </h4>

                <h4 class="text-xs md:text-xs lg:text-[14px] text-red pt-2">
                    <%= reward_div_list[i].stars_use %>
                </h4>
            </div>
            <% } %>
        </div>

        <p class="text-center text-[20px] font-semibold text-red  pt-10 ">
            ผู้เล่นที่ขยันเก็บสะสมดาว จะมีของรางวัลพิเศษ(ของรางวัลมูลค่าสูง)ให้!!
        </p>

        <div class="flex flex-col pt-5 ">
            <a id="tradeCouponButton">
            <button class="text-xl bg-primary hover:bg-secondary hover:text-gray-900  text-white font-semibold py-2 px-4 border border-gray-400 rounded-3xl shadow">
                แลกของรางวัล
            </button>
            </a>
        </div>


        <div class="flex flex-col pt-3 ">
            <a id="myCouponButton">
            <button class="text-xl bg-primary hover:bg-secondary hover:text-gray-900  text-white font-semibold py-2 px-4 border border-gray-400 rounded-3xl shadow">
                ดูคูปองของฉัน
            </button>
            </a>
        </div>

    </section>

    <!-- เมนูเกม -->
    <section class="bg-white lg:p-16 lg:py-16 p-6 border rounded-md  mb-4 mt-1 flex flex-col lg:flex-col items-center flex-wrap">
        <div>
            <h2 class="text-2xl underline pb-10 pt-4 text-blue font-semibold">
                เข้าเล่นเกมต่าง ๆ
            </h2>
        </div>
        <div class="grid grid-cols-2 gap-6 sm:gap-x-10 sm:grid-cols-3 lg:grid-cols-4 lg:gap-12 lg:grid-cols-4 shadow-sm p-2">
            <% for (let i = 0; i < game_div_list.length; i++) { %>
            <a id="<%= game_div_list[i].name %>" href="<%= game_div_list[i].url %>" class="hover:shadow-secondary hover:shadow-xl transition-all duration-300">
                <div class="flex flex-col flex-wrap items-center justify-center w-full shadow-inner p-2 ">

                    <div class="bg-white flex flex-col lg:flex-col items-center h-24">
                        <img src="<%= game_div_list[i].icon %>" class="drop-shadow-lg" width="75" >
                    </div>

                    <div>
                        <h3 class=" text-[14px] lg:text-[18px] text-blue hover:text-red transition-all duration-500">
                            <%= game_div_list[i].name %>
                        </h3>
                    </div>

                    <p class="text-xs lg:text-[12px] text-blue text-center">
                        <%= game_div_list[i].description %>
                    </p>
                </div>
            </a>
            <% } %>
        </div>

    </section>

    <!-- สปอน -->
    <section class="bg-white p-6 border rounded-md my-4 flex flex-col lg:flex-col items-center mb-10">
        <div>
            <h2 class="text-2xl underline py-10 text-blue font-semibold">
                ผู้สนับสนุนของรางวัล
            </h2>
        </div>

        <div class="grid grid-cols-2  gap-6 sm:gap-x-10 sm:grid-cols-4 lg:grid-cols-5 lg:gap-12 lg:grid-cols-5 p-2">
            <% for (let i = 0; i < sponsor_div_list.length; i++) { %>
            <div class="flex flex-col flex-wrap items-center justify-center w-full ">
                <div class="bg-white flex flex-col lg:flex-col items-center h-24 ">
                    <div class="bg-white flex flex-col lg:flex-col items-center h-24">
                        <img src="<%= sponsor_div_list[i].image %>" width="75" >
                    </div>
                </div>
            </div>
            <% } %>

        </div>
    </section>

</div>


<section>
    <div class="bg-primary p-4 md:py-4 flex flex-col lg:flex-col items-center">
        <img src="images/footer_logo.png" width="200" class="block justify-center items-center">
    </div>
</section>

<script nonce="<%= nonce %>">

    // Get the current URL
    const currentUrl = window.location.href;

    // Create a URL object from the current URL
    const url = new URL(currentUrl);

    // Get the search part of the URL, including the '?'
    const searchParams = url.search;

    // Create a URLSearchParams object from the search part
    const urlSearchParams = new URLSearchParams(searchParams);

    // Get the value of the 'access_token' parameter
    const accessToken = urlSearchParams.get('access_token');

    // Now you can use the 'accessToken' variable wherever you need it
    console.log(currentUrl, accessToken);

    rewardPage.href = "/reward?access_token=" + accessToken;
    myCouponButton.href = "/my_coupon?access_token=" + accessToken;
    myCouponButtonNav.href = "/my_coupon?access_token=" + accessToken;
    tradeCouponButton.href = "/trade_coupon?access_token=" + accessToken;

    const gameButtonList = [<%= game_button_list %>]
    for (let i = 1; i < gameButtonList.length; i++) {
        // gameButtonList[i].href = "/game_middleware?access_token=" + accessToken + "?game_id=" + gameButtonList[i].id;
        gameButtonList[i].href += "?access_token=" + accessToken;
    }

</script>

<!-- TW Elements JavaScript -->
<script src="/tw-elements/dist/js/tw-elements.umd.min.js" type="text/javascript"></script>
</body>
</html>