<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> คูปองของฉัน </title>

    <!-- TailwindCSS -->
    <link href="/stylesheets/output.css" rel="stylesheet" />

</head>
<body class="bg-background ">

<!-- Navbar-->
<nav class="bg-transparent max-w-screen">
    <div class="max-w-full max-w-screen fixed flex m-5 top-0 items-center justify-between p-4 gap-2 drop-shadow-lg">
        <a id="rewardPage" class="flex items-center space-x-3 rtl:space-x-reverse">
            <img src="images/LOGO_KasetFairVerse.png" class="h-12" />
            <span class="self-center font-semibold text-blue whitespace-nowrap dark:text-white">KASETFAIR VERSE </span>
        </a>
    </div>
</nav>

<div class="flex container mt-8 mx-auto pt-12 justify-center items-center">
<div class="bg-white lg:pt-6 lg:py-6 p-6 border rounded-md  my-4 flex flex-col lg:flex-col items-center flex-wrap">
    <div class="w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700">
        <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
            <h1 class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white">
                ลงชื่อเข้าใช้
            </h1>
            <form class="space-y-4 md:space-y-6" action="/login" method="post">
                <div>
                    <label for="userword" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">ชื่อผู้ใช้ (Username)</label>
                    <input type="text" name="userword" id="userword" class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="username" required="">
                </div>
                <div>
                    <label for="passname" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">รหัสผ่าน</label>
                    <input type="password" name="passname" id="passname" placeholder="••••••••" class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required="">
                </div>
                <button type="submit" class="w-full drop-shadow-xl text-white bg-primary hover:bg-secondary focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">
                    Login
                </button>
            </form>

        </div>
    </div>
</div>
</div>

<script nonce="<%= nonce %>">

    // Get the current URL
    const currentUrl = window.location.href;

    // Create a URL object from the current URL
    const url = new URL(currentUrl);

    // Get the search part of the URL, including the '?'
    const searchParams = url.search;

    // Create a URLSearchParams object from the search part
    const urlSearchParams = new URLSearchParams(searchParams);

    // Get the value of the 'access_token' parameter
    const accessToken = urlSearchParams.get('access_token');

    // Now you can use the 'accessToken' variable wherever you need it
    console.log(currentUrl, accessToken);

    rewardPage.href = "/reward?access_token=" + accessToken;

</script>


</body>
</html>